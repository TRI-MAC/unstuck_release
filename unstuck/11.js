window.habitlab_content_script = true;

(window["webpackJsonp"] = window["webpackJsonp"] || []).push([[11],{

/***/ "./src/bower_components/habitlab-paper-item/habitlab-paper-item-0.js":
/*!*********************************************************!*\
  !*** ./src/bower_components/habitlab-paper-item/habitlab-paper-item-0.js ***!
  \*********************************************************/
/*! no static exports found */
/***/ (function(module, exports) {


    Polymer({
      is: 'habitlab-paper-item',

      behaviors: [
        Polymer.PaperItemBehavior
      ]
    });
  

/***/ }),

/***/ "./src/bower_components/habitlab-paper-item/habitlab-paper-item-behavior-0.js":
/*!******************************************************************!*\
  !*** ./src/bower_components/habitlab-paper-item/habitlab-paper-item-behavior-0.js ***!
  \******************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {


  /** @polymerBehavior Polymer.PaperItemBehavior */
  Polymer.PaperItemBehaviorImpl = {
    hostAttributes: {
      role: 'option',
      tabindex: '0'
    }
  };

  /** @polymerBehavior */
  Polymer.PaperItemBehavior = [
    Polymer.IronButtonState,
    Polymer.IronControlState,
    Polymer.PaperItemBehaviorImpl
  ];


/***/ }),

/***/ "./src/bower_components/habitlab-paper-item/habitlab-paper-item-behavior.deps.js":
/*!*********************************************************************!*\
  !*** ./src/bower_components/habitlab-paper-item/habitlab-paper-item-behavior.deps.js ***!
  \*********************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

// this file was generated by scripts/generate_polymer_dependencies
// do not edit this file directly
// instead, edit the corresponding .html file and re-run the script
const {import_dom_modules} = __webpack_require__(/*! libs_frontend/dom_utils */ "./src/libs_frontend/dom_utils.ls")
__webpack_require__(/*! bower_components/polymer/polymer.deps.js */ "./src/bower_components/polymer/polymer.deps.js")
__webpack_require__(/*! bower_components/iron-behaviors/iron-button-state.deps.js */ "./src/bower_components/iron-behaviors/iron-button-state.deps.js")
__webpack_require__(/*! bower_components/iron-behaviors/iron-control-state.deps.js */ "./src/bower_components/iron-behaviors/iron-control-state.deps.js")
import_dom_modules(__webpack_require__(/*! bower_components/habitlab-paper-item/habitlab-paper-item-behavior.html */ "./src/bower_components/habitlab-paper-item/habitlab-paper-item-behavior.html"), 'bower_components/habitlab-paper-item/habitlab-paper-item-behavior.html')
__webpack_require__(/*! bower_components/habitlab-paper-item/habitlab-paper-item-behavior-0 */ "./src/bower_components/habitlab-paper-item/habitlab-paper-item-behavior-0.js")


/***/ }),

/***/ "./src/bower_components/habitlab-paper-item/habitlab-paper-item-behavior.html":
/*!******************************************************************!*\
  !*** ./src/bower_components/habitlab-paper-item/habitlab-paper-item-behavior.html ***!
  \******************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<html><head><link rel=import href=../polymer/polymer.html> <link rel=import href=../iron-behaviors/iron-button-state.html> <link rel=import href=../iron-behaviors/iron-control-state.html> <script src=habitlab-paper-item-behavior-0.js></script> </head><body></body></html>";

/***/ }),

/***/ "./src/bower_components/habitlab-paper-item/habitlab-paper-item-shared-styles.deps.js":
/*!**************************************************************************!*\
  !*** ./src/bower_components/habitlab-paper-item/habitlab-paper-item-shared-styles.deps.js ***!
  \**************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

// this file was generated by scripts/generate_polymer_dependencies
// do not edit this file directly
// instead, edit the corresponding .html file and re-run the script
const {import_dom_modules} = __webpack_require__(/*! libs_frontend/dom_utils */ "./src/libs_frontend/dom_utils.ls")
__webpack_require__(/*! bower_components/iron-flex-layout/iron-flex-layout.deps.js */ "./src/bower_components/iron-flex-layout/iron-flex-layout.deps.js")
__webpack_require__(/*! bower_components/paper-styles/color.deps.js */ "./src/bower_components/paper-styles/color.deps.js")
__webpack_require__(/*! bower_components/paper-styles/default-theme.deps.js */ "./src/bower_components/paper-styles/default-theme.deps.js")
__webpack_require__(/*! bower_components/paper-styles/typography.deps.js */ "./src/bower_components/paper-styles/typography.deps.js")
import_dom_modules(__webpack_require__(/*! bower_components/habitlab-paper-item/habitlab-paper-item-shared-styles.html */ "./src/bower_components/habitlab-paper-item/habitlab-paper-item-shared-styles.html"), 'bower_components/habitlab-paper-item/habitlab-paper-item-shared-styles.html')


/***/ }),

/***/ "./src/bower_components/habitlab-paper-item/habitlab-paper-item-shared-styles.html":
/*!***********************************************************************!*\
  !*** ./src/bower_components/habitlab-paper-item/habitlab-paper-item-shared-styles.html ***!
  \***********************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = " <link rel=import href=../iron-flex-layout/iron-flex-layout.html> <link rel=import href=../paper-styles/color.html> <link rel=import href=../paper-styles/default-theme.html> <link rel=import href=../paper-styles/typography.html> <habitlab-dom-module id=habitlab-paper-item-shared-styles> <template> <style>.habitlab-paper-item,:host{display:block;position:relative;min-height:var(--habitlab-paper-item-min-height,48px);padding:0 16px}.habitlab-paper-item{@apply(--paper-font-subhead);border:none;outline:0;background:#fff;width:100%;text-align:left}.habitlab-paper-item[hidden],:host([hidden]){display:none!important}.habitlab-paper-item.iron-selected,:host(.iron-selected){font-weight:var(--habitlab-paper-item-selected-weight,bold);@apply(--habitlab-paper-item-selected);}.habitlab-paper-item[disabled],:host([disabled]){color:var(--habitlab-paper-item-disabled-color,--disabled-text-color);@apply(--habitlab-paper-item-disabled);}.habitlab-paper-item:focus,:host(:focus){position:relative;outline:0;@apply(--habitlab-paper-item-focused);}.habitlab-paper-item:focus:before,:host(:focus):before{@apply(--layout-fit);background:currentColor;content:'';opacity:var(--dark-divider-opacity);pointer-events:none;@apply(--habitlab-paper-item-focused-before);}</style> </template> </habitlab-dom-module> ";

/***/ }),

/***/ "./src/bower_components/habitlab-paper-item/habitlab-paper-item.deps.js":
/*!************************************************************!*\
  !*** ./src/bower_components/habitlab-paper-item/habitlab-paper-item.deps.js ***!
  \************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

// this file was generated by scripts/generate_polymer_dependencies
// do not edit this file directly
// instead, edit the corresponding .html file and re-run the script
const {import_dom_modules} = __webpack_require__(/*! libs_frontend/dom_utils */ "./src/libs_frontend/dom_utils.ls")
__webpack_require__(/*! bower_components/polymer/polymer.deps.js */ "./src/bower_components/polymer/polymer.deps.js")
__webpack_require__(/*! bower_components/iron-flex-layout/iron-flex-layout.deps.js */ "./src/bower_components/iron-flex-layout/iron-flex-layout.deps.js")
__webpack_require__(/*! bower_components/habitlab-paper-item/habitlab-paper-item-behavior.deps.js */ "./src/bower_components/habitlab-paper-item/habitlab-paper-item-behavior.deps.js")
__webpack_require__(/*! bower_components/habitlab-paper-item/habitlab-paper-item-shared-styles.deps.js */ "./src/bower_components/habitlab-paper-item/habitlab-paper-item-shared-styles.deps.js")
import_dom_modules(__webpack_require__(/*! bower_components/habitlab-paper-item/habitlab-paper-item.html */ "./src/bower_components/habitlab-paper-item/habitlab-paper-item.html"), 'bower_components/habitlab-paper-item/habitlab-paper-item.html')
__webpack_require__(/*! bower_components/habitlab-paper-item/habitlab-paper-item-0 */ "./src/bower_components/habitlab-paper-item/habitlab-paper-item-0.js")


/***/ }),

/***/ "./src/bower_components/habitlab-paper-item/habitlab-paper-item.html":
/*!*********************************************************!*\
  !*** ./src/bower_components/habitlab-paper-item/habitlab-paper-item.html ***!
  \*********************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<html><head><link rel=import href=../polymer/polymer.html> <link rel=import href=../iron-flex-layout/iron-flex-layout.html> <link rel=import href=habitlab-paper-item-behavior.html> <link rel=import href=habitlab-paper-item-shared-styles.html> </head><body><habitlab-dom-module id=habitlab-paper-item> <template> <style include=habitlab-paper-item-shared-styles></style> <style>:host{@apply(--layout-horizontal);@apply(--layout-center);@apply(--paper-font-subhead);@apply(--habitlab-paper-item);}</style> <content></content> </template> <script src=habitlab-paper-item-0.js></script> </habitlab-dom-module> </body></html>";

/***/ }),

/***/ "./src/components/positive-site-trigger-v2.deps.js":
/*!*********************************************************!*\
  !*** ./src/components/positive-site-trigger-v2.deps.js ***!
  \*********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

// this file was generated by scripts/generate_polymer_dependencies
// do not edit this file directly
// instead, edit the corresponding .html file and re-run the script
const {import_dom_modules} = __webpack_require__(/*! libs_frontend/dom_utils */ "./src/libs_frontend/dom_utils.ls")
__webpack_require__(/*! bower_components/polymer/polymer.deps.js */ "./src/bower_components/polymer/polymer.deps.js")
__webpack_require__(/*! bower_components/habitlab-paper-item/habitlab-paper-item.deps.js */ "./src/bower_components/habitlab-paper-item/habitlab-paper-item.deps.js")
__webpack_require__(/*! bower_components/habitlab-paper-button/habitlab-paper-button.deps.js */ "./src/bower_components/habitlab-paper-button/habitlab-paper-button.deps.js")
__webpack_require__(/*! components/habitlab-logo-v2.deps.js */ "./src/components/habitlab-logo-v2.deps.js")
import_dom_modules(__webpack_require__(/*! components/positive-site-trigger-v2.html */ "./src/components/positive-site-trigger-v2.html"), 'components/positive-site-trigger-v2.html')
__webpack_require__(/*! components/positive-site-trigger-v2 */ "./src/components/positive-site-trigger-v2.js")


/***/ }),

/***/ "./src/components/positive-site-trigger-v2.html":
/*!******************************************************!*\
  !*** ./src/components/positive-site-trigger-v2.html ***!
  \******************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<link rel=import href=../bower_components/polymer/polymer.html> <link rel=import href=../bower_components/habitlab-paper-item/habitlab-paper-item.html> <link rel=import href=../bower_components/habitlab-paper-button/habitlab-paper-button.html> <link rel=import href=habitlab-logo-v2.html> <habitlab-dom-module id=positive-site-trigger-v2> <template> <habitlab-custom-style> <style is=habitlab-custom-style>:host{--habitlab-paper-item:{font-family:Verdana,Geneva,sans-serif;font-size:20px;font-color:#526fab;overflow:hidden;white-space:nowrap;display:block;text-overflow:ellipsis};--habitlab-paper-item-min-height:36px}#site-icon{width:20px;border-radius:5px;box-shadow:2px 2px 2px #888}.hdr{padding:10px;font-size:20px;display:flex}#goal{padding:10px;display:table;font-size:14px}#goal-description{display:table-cell;vertical-align:middle;padding-left:10px}#trigger-container{max-width:519px;min-width:400px;padding:20px;display:flex;flex-direction:column;align-items:center;text-align:center;font-family:var(--trigger-font-family);border-color:var(--trigger-border-color,#fff);border-style:var(--trigger-border-style,none);border-width:var(--trigger-border-width,0);background-color:var(--trigger-bg-color,#fff)}#intro-text{font-size:20px;padding-bottom:10px}.text-div{font-family:Verdana,Geneva,sans-serif;text-align:center;color:#415d67;line-height:150%;font-size:15px}#trigger-button{cursor:pointer;margin:10px;padding:10px;background-color:green;color:#fff;font-size:14px;box-shadow:2px 2px 2px #888;height:40px;vertical-align:middle}#trigger-button-div{margin:10px;height:50px;display:flex;align-items:center;justify-content:center;text-align:center;height:100%;width:100%}#trigger-button-div .streak-img{height:80%;margin:5px}#streak-container{display:table;font-size:20px;margin:10px;padding:5px 10px 5px 10px;background-color:#3c5a96;border-radius:5px;color:#fff;box-shadow:2px 2px 2px #888}#streak-box{height:40px;width:60px;display:flex;align-items:center;justify-content:center;text-align:left;padding:5px;background-color:#3c5a96;color:#fff;border-color:var(--trigger-streak-border-color,#fff);border-style:var(--trigger-streak-border-style,none);border-width:var(--trigger-streak-border-width,0)}#streak-box .streak-img{height:80%;margin:5px}#grey-space{background-color:#e9ebee;height:12px;margin-left:-1px;margin-right:-1px}#shadow{height:1px;background-color:#1d2129;opacity:.2}</style> </habitlab-custom-style> <div id=trigger-container> <div class=hdr>Remember your goal to {{positiveGoalStatement}}?</div> <habitlab-paper-button id=trigger-button> <div id=trigger-button-div> <div on-click=goClicked>{{callToAction}}</div> </div> </habitlab-paper-button> <template is=habitlab-dom-if if={{in_facebook_news_feed}}> <habitlab-logo-v2></habitlab-logo-v2> </template> </div> <template is=habitlab-dom-if if={{in_facebook_news_feed}}> <div id=shadow></div> <div id=grey-space></div> </template> </template> <script src=positive-site-trigger-v2.js></script> </habitlab-dom-module>";

/***/ }),

/***/ "./src/components/positive-site-trigger-v2.js":
/*!****************************************************!*\
  !*** ./src/components/positive-site-trigger-v2.js ***!
  \****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

const {polymer_ext} = __webpack_require__(/*! libs_frontend/polymer_utils */ "./src/libs_frontend/polymer_utils.ls")

const {
  log_action,
} = __webpack_require__(/*! libs_frontend/intervention_log_utils */ "./src/libs_frontend/intervention_log_utils.ls")

const {
  get_goal_info
} = __webpack_require__(/*! libs_common/intervention_info */ "./src/libs_common/intervention_info.ls")

const {
  get_goal_statement
} = __webpack_require__(/*! libs_common/goal_utils */ "./src/generated_libs/libs_frontend/goal_utils.js")

const {
  get_streak
} = __webpack_require__(/*! libs_common/streak_utils */ "./src/generated_libs/libs_frontend/streak_utils.js")

const {
  get_favicon_data_for_domain
} = __webpack_require__ (/*! libs_common/favicon_utils */ "./src/generated_libs/libs_frontend/favicon_utils.js")

polymer_ext({
  is: 'positive-site-trigger-v2',
  properties: {
    goal: {
      type: Object,
      observer: 'goal_changed'
    },
    positiveSite: {
      type: String,
      computed: 'compute_sitename(goal)'
    },
    positiveSiteIcon: {
      type: String
    },
    streakIconURL:{
      type: String,
      value: chrome.extension.getURL('icons/streak.svg') 
    },
    positiveGoalStatement: {
      type: String
    },
    callToAction: {
      type: String,
      computed: 'compute_call_to_action(goal)'
    },
    // streak: {
    //   type: Number,
    //   value: 0
    // },
    in_facebook_news_feed: {
      type: Boolean,
      value: false
    }
  },
  goClicked: function() {
    log_action({'positive': 'Went to positive site.'})
    var domain = this.goal.domain
    if (domain.search("http") == -1) {
      domain = 'https://' + domain
    }
    window.location.href = domain
  },
  compute_sitename: function(goal) {
    if (goal == null)
      return ""
    return goal.sitename_printable
  },
  goal_changed: async function(goal) {
    this.positiveSiteIcon = await this.compute_icon(goal)
    this.streak = await get_streak(goal)    
    console.log('set goal to ' + goal.name)
    this.update_goal_statement(goal)
  },
  compute_icon: async function(goal) {
    if (goal == null) {
      return ""
    } else if (goal.icon != null) {
      return goal.icon
    } else if (goal.domain != null) {
      let icon = await get_favicon_data_for_domain(goal.domain)
      return icon
    } else {
      console.error("couldn't compute icon for goal " + goal.name)
      return ""
    }
  },
  update_goal_statement: async function(goal) {
    let statement = await get_goal_statement(goal)
    statement = statement.substring(0, 1).toLowerCase() + statement.substring(1)
    if (statement.endsWith("."))
      statement = statement.substring(0, statement.length-1)
    this.positiveGoalStatement = statement
  },
  compute_call_to_action: function(goal) {
    if (goal == null) {
      return ""
    } else {
      return goal.call_to_action
    }
  },
  ready: async function() {
    this.goal = get_goal_info()
  }
})




/***/ }),

/***/ "./src/generated_libs/libs_frontend/favicon_utils.js":
/*!***********************************************************!*\
  !*** ./src/generated_libs/libs_frontend/favicon_utils.js ***!
  \***********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

// This file is generated from libs_common/function_signatures.ls
// Do not edit this file directly. To regenerate, run gulp
const {import_lib} = __webpack_require__(/*! libs_frontend/import_lib */ "./src/libs_frontend/import_lib.ls");
module.exports = import_lib('favicon_utils');


/***/ }),

/***/ "./src/generated_libs/libs_frontend/streak_utils.js":
/*!**********************************************************!*\
  !*** ./src/generated_libs/libs_frontend/streak_utils.js ***!
  \**********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

// This file is generated from libs_common/function_signatures.ls
// Do not edit this file directly. To regenerate, run gulp
const {import_lib} = __webpack_require__(/*! libs_frontend/import_lib */ "./src/libs_frontend/import_lib.ls");
module.exports = import_lib('streak_utils');


/***/ })

}]);